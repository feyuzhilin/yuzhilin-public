<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>手写new操作符</title>
</head>

<body>
    <script>
        //  在调用 new 的过程中会发生以上四件事情：
        // （1）首先创建了一个新的空对象
        // （2）设置原型，将对象的原型设置为函数的 prototype 对象。
        // （3）让函数的 this 指向这个对象，执行构造函数的代码（为这个新对象添加属性）
        // （4）判断函数的返回值类型，如果是值类型，返回创建的对象。如果是引用类型，就返回这个引用类型的对象。

        function myNew(Fn,...args){
            const newObj = Object.create(Fn.prototype);
            newObj.__proto__ = Fn.prototype
            const result = Fn().aplly(newObj,args)
            return result && typeof result === 'object' ? result : newObj
        }
    </script>
</body>

</html>